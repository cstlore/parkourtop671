<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
          crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title></title>
    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script>
        function logout() {
            location.href = "http://127.0.0.1:8080/logout";
        }

        function change_page() {
            location.href = "http://127.0.0.1:8080/add_profile";
        }

        function waitForElm(selector) {
            return new Promise(resolve => {
                if (document.querySelectorAll(selector)[0]) {
                    return resolve(document.querySelectorAll(selector)[0]);
                }

                const observer = new MutationObserver(mutations => {
                    if (document.querySelectorAll(selector)[0]) {
                        observer.disconnect();
                        resolve(document.querySelectorAll(selector)[0]);
                    }
                });

                // If you get "parameter 1 is not of type 'Node'" error, see https://stackoverflow.com/a/77855838/492336
                observer.observe(document.documentElement, {
                    childList: true,
                    subtree: true
                });
            });
        }

        waitForElm('#post').then((elm) => {
            let posX = -1
            elm.addEventListener("dragstart", (e) => {
                posX = e.pageX
            });
            elm.addEventListener("drag", (e) => {
                let diffX = Math.max(Math.min(200, e.pageX - posX), -200)
                elm.style.transform = `rotate(${diffX / 400 * 90}deg)`

            });
        });

        function readURL(input) {
            if (input.files && input.files[0]) {

                var reader = new FileReader();

                reader.onload = function (e) {
                    $('.image-upload-wrap').hide();

                    $('.file-upload-image').attr('src', e.target.result);
                    $('.file-upload-content').show();
                };
                console.log(input.files[0])
                reader.readAsDataURL(input.files[0]);

            } else {
                removeUpload();
            }
        }

        function removeUpload() {
            $('.file-upload-input').replaceWith($('.file-upload-input').clone());
            $('.file-upload-content').hide();
            $('.image-upload-wrap').show();
        }

        $('.image-upload-wrap').bind('dragover', function () {
            $('.image-upload-wrap').addClass('image-dropping');
        });
        $('.image-upload-wrap').bind('dragleave', function () {
            $('.image-upload-wrap').removeClass('image-dropping');
        });
    </script>
</head>
<body>
{% block content %}{% endblock %}
</body>
</html>